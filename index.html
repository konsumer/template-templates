<html>
  <head>
    <title>template templates</title>
    <style>
      body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        padding: 20px;
      }
    </style>
  </head>
</html>

<body>

<h1>template templates</h1>

<p>Learn more, <a href="https://github.com/konsumer/template-templates">here</a>.</p>
<p>Here is a simple browser example:</p>

<label for="news">news:</label>
<select id="news">
  <option value=good>good</option>
  <option value=bad>bad</option>
</select>

<h3>This template:</h3>

<pre id="template">
Hi ${name},

${news === 'good'
  ? 'We are delighted to inform you that'
  : 'We regret having to break this bad news to you, but'
} ${reason}

Signed Your Eternal Friends at ${company},
${agent}
</pre>

<h3>Produces this output:</h3>

<pre id="out"></pre>

<script type="module">
import { tpl } from 'https://esm.run/template-templates'

// const tstring = await fetch('./demo.tpl').then(r => r.text())
const tstring = document.getElementById('template').innerHTML

const news ={
  bad: {
    name: 'Mr. Anderson',
    company: 'MegaCorp',
    agent: 'Agent Smith',
    news: 'bad',
    reason: 'your cat died.'
  },
  good: {
    name: 'Mr. Anderson',
    company: 'MegaCorp',
    agent: 'Agent Smith',
    news: 'good',
    reason: 'you won the lottery.'
  }
}

const newsE = document.getElementById('news')

const newsChange = () => {
  document.getElementById('out').innerHTML = tpl(tstring, news[newsE.value])
}

newsE.addEventListener('change', newsChange)
newsChange()
</script>

</body>